<div class="container px-5 px-sm-0">
  <div class="row">
    <div class="col-md-3">
      <!--部分テンプレート-->
      <%#= render 'drinks/drinks', user: @user,drink: @drink,taste: @taste,tastes: @tastes %>
      <!--部分テンプレート終-->


<!--新規投稿フォーム-->
<h2 class="mt-3" style="font-family: Agbalumo; color:#8da0b6">I drink..</h2>
<% if @drink.errors.present? %>
  <% @drink.errors.full_messages.each do |msg| %>
    <%= msg %>
  <% end %>
<% end %>
<%= form_with model: @drink do |f| %>
  <div class="form-group px-3 py-3 border shadow-sm">
  <strong>Image</strong>
  <%= f.file_field :drink_image, accept: "image/*",class: "-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;", style:"width:100%" %>
  <div class="form-group">
    <strong>Brand</strong><br>
    <%= f.text_field :brand %>
  </div>
  <div class="form-group">
    <strong>ジャンル</strong><br>
    <%= f.select :genre, Drink.genres.keys.map { |k| [I18n.t("enums.drink.genres.#{k}"), k] } %>
  </div>
  <div class="form-group">
    <strong>テイスト</strong><br>
    <div class="col">
      <div class="tag-search">
        <div class="d-flex flex-row flex-wrap">
          <%= f.collection_check_boxes :taste_ids, @tastes, :id, :taste do |b| %>
      	    <div class="mx-1">
      	      <%= b.check_box %>
      	      <%= b.label %>
      	    </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <strong>コメント</strong><br>
    <%= f.text_area :text %>
  </div>
  <div class="form-group">
    <%= f.submit 'Create', class:'btn btn-outline-secondary btn-block' %>
  </div>
<% end %>
</div>
</div>

<!--ユーザー情報の表示-->
<div class="col-md-8 offset-md-1">
  <h2 class="mt-3" style="font-family: Agbalumo; color:#8da0b6">User Info</h2>
    <div class="card mb-3">
      <div class="row no-gutters">
        <div class="col-md-4 d-flex align-items-center justify-content-center" style="max-width: 100%;">
          <% if @user.profile_image.attached? %>
            <%= image_tag @user.profile_image, size: "150x150" %>
            <% else %>
            <%= image_tag 'no_image', size: "150x150" %>
          <% end %>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title"><%= @user.name %></h5>
            <p class="card-text"><%= @user.introduction %></p>
            <p class="card-text"><small class="text-muted">follow <%= @user.followings.count %></small></p>
            <p class="card-text"><small class="text-muted">follower <%= @user.followers.count %></small></p>
        </div>
      </div>
    </div>
  </div>

<!--ユーザーが投稿したお酒一覧、レイアウト修正-->

      <h2 class="mt-3" style="font-family: Agbalumo; color:#8da0b6">Drinks</h2>
      <div class="row">
        <% @drinks.each do |drink| %>
          <div class="col-sm-12 col-md-4">
            <div class="card mb-3">
              <% if drink.drink_image.attached? %>
                <%= image_tag drink.drink_image, size: "100x100", class: "card-img-top card-img" %>
              <% else %>
                <%= image_tag 'no_image', size: "100x100", class: "card-img-top card-img" %>
              <% end %>
              <div class="card-body">
                <h5 class="card-title">
                  <%= drink.brand %>
                </h5>
                <p class="card-text">
                  <%= drink.text %>
                </p>
                <%= link_to "Show", drink_path(drink), class: "btn btn-outline-secondary" %>
             <!--部分テンプレート（いいね非同期通信）-->
              <td id="favorite_buttons_<%= drink.id %>">
　　　          <%= render "favorites/favorite", drink: drink %>
              </td>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<%= paginate @drinks %>